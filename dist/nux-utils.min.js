!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):(global=global||self).nuxUtils=factory()}(this,function(){"use strict";var arrayEach_1=function(obj,iterate,context){if(obj)if(obj.forEach)obj.forEach(iterate,context);else for(var index=0,len=obj.length;index<len;index++)iterate.call(context,obj[index],index,obj)};var array={arrayEqual:function(arr1,arr2){if(arr1===arr2)return!0;if(arr1.length!=arr2.length)return!1;for(var i=0;i<arr1.length;++i)if(arr1[i]!==arr2[i])return!1;return!0},arrayEach:arrayEach_1,arrFlat2complex:function(arr,num){for(var newArr=[],splitNum=Math.ceil(arr.length/num),i=0;i<splitNum;i++)newArr.push(arr.slice(i*num,i*num+num));return newArr},array2tree:function(list,parId){var len=list.length;return function loop(parId){for(var res=[],i=0;i<len;i++){var item=list[i];item.parentId===parId&&(item.children=loop(item.id),res.push(item))}return res}(parId)},tree2array:function(node){for(var stack=node,data=[];0!=stack.length;){var shift=stack.shift();data.push({id:shift.id,name:shift.name,parentId:shift.parentId});var children=shift.children;if(children)for(var i=0;i<children.length;i++)stack.push(children[i])}return data}},class2type={},getProto=Object.getPrototypeOf,hasOwn=class2type.hasOwnProperty,fnToString=hasOwn.toString,ObjectFunctionString=fnToString.call(Object),isPlainObject_1=function(Ctor){return!(!Ctor||"[object Object]"!==toString.call(Ctor))&&(!(Ctor=getProto(Ctor))||"function"==typeof(Ctor=hasOwn.call(Ctor,"constructor")&&Ctor.constructor)&&fnToString.call(Ctor)===ObjectFunctionString)};function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}var assign_1=function assign(argument_0){var options,name,copy,copyIsArray,clone,target=argument_0||{},i=1,length=arguments.length,deep=!1;for("boolean"==typeof target&&(deep=target,target=arguments[i]||{},i++),"object"!==_typeof(target)&&"function"!=typeof target&&(target={});i<length;i++)if(null!=(options=arguments[i]))for(name in options)copy=options[name],"__proto__"!==name&&target!==copy&&(deep&&copy&&(isPlainObject_1(copy)||(copyIsArray=Array.isArray(copy)))?(clone=target[name],clone=copyIsArray&&!Array.isArray(clone)?[]:copyIsArray||isPlainObject_1(clone)?clone:{},copyIsArray=!1,target[name]=assign(deep,clone,copy)):void 0!==copy&&(target[name]=copy));return target};var object={isPlainObject:isPlainObject_1,assign:assign_1,deepClone:function deepClone(values){var copy;if(null==values||"object"!=_typeof(values))return values;if(values instanceof Date)return(copy=new Date).setTime(values.getTime()),copy;if(values instanceof Array){copy=[];for(var i=0,len=values.length;i<len;i++)copy[i]=deepClone(values[i]);return copy}if(values instanceof Object){for(var attr in copy={},values)values.hasOwnProperty(attr)&&(copy[attr]=deepClone(values[attr]));return copy}throw new Error("Unable to copy values! Its type isn't supported.")},isEmptyObject:function(obj){return!(!obj||"object"!==_typeof(obj)||Array.isArray(obj))&&!Object.keys(obj).length}},setCookie_1=function(name,value,expires,domain,path,secure){var cookieText="";cookieText+=encodeURIComponent(name)+"="+encodeURIComponent(value),expires instanceof Date&&(cookieText+="; expires="+expires.toGMTString()),path&&(cookieText+="; path="+path),domain&&(cookieText+="; domain="+domain),secure&&(cookieText+="; secure"),document.cookie=cookieText},_function=function(name,domain,path,secure){setCookie_1(name,"",Date(0),domain,path,secure)},cookie={setCookie:setCookie_1,getCookie:function(cookieEnd){var cookieName=encodeURIComponent(cookieEnd)+"=",cookieStart=document.cookie.indexOf(cookieName),cookieValue="";return-1<cookieStart&&(-1==(cookieEnd=document.cookie.indexOf(";",cookieStart))&&(cookieEnd=document.cookie.length),cookieValue=decodeURIComponent(document.cookie.substring(cookieStart+cookieName.length,cookieEnd))),cookieValue},removeCookie:_function};var url={urlQuery2Object:function(url){if(-1===(url=url||window.location.href).indexOf("?"))return{};var search="?"===url[0]?url.substr(1):url.substring(url.lastIndexOf("?")+1);if(""===search)return{};search=search.split("&");for(var query={},i=0;i<search.length;i++){var pair=search[i].split("=");query[decodeURIComponent(pair[0])]=decodeURIComponent(pair[1]||"")}return query},object2UrlQuery:function(obj){if(!obj)return"";var key,pairs=[];for(key in obj){var value=obj[key];if(value instanceof Array)for(var i=0;i<value.length;++i)pairs.push(encodeURIComponent(key+"["+i+"]")+"="+encodeURIComponent(value[i]));else pairs.push(encodeURIComponent(key)+"="+encodeURIComponent(obj[key]))}return pairs.join("&")}},toString$1=class2type.toString;"Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(name){class2type["[object "+name+"]"]=name.toLowerCase()});var toType_1=function(obj){return null==obj?obj+"":"object"===_typeof(obj)?class2type[toString$1.call(obj)]||"object":_typeof(obj)},type={toType:toType_1},strUndefined={},staticDocument=("undefined"==typeof document?"undefined":_typeof(document))===strUndefined?0:document,staticWindow=("undefined"==typeof window?"undefined":_typeof(window))===strUndefined?0:window;function isBrowseStorage(storage){try{return storage.setItem("__xe_t",1),storage.removeItem("__xe_t"),!0}catch(e){return!1}}function isBrowseType(type){return-1<navigator.userAgent.indexOf(type)}function encodeFormData(data){if(!data)return"";var name,value,pairs=[];for(name in data){data.hasOwnProperty(name)&&"function"!=typeof data[name]&&(value=data[name].toString(),name=encodeURIComponent(name.replace("%20","+")),value=encodeURIComponent(value.replace("%20","+")),pairs.push(name+"="+value))}return pairs.join("&")}function fn(){}var bom={browser:function(){var $body,isChrome,isEdge,isMobile,result={isNode:!1,isMobile:!1,isPC:!1,isDoc:!!staticDocument};return staticWindow||("undefined"==typeof process?"undefined":_typeof(process))===strUndefined?(isEdge=isBrowseType("Edge"),isChrome=isBrowseType("Chrome"),isMobile=/(Android|webOS|iPhone|iPad|iPod|SymbianOS|BlackBerry|Windows Phone)/.test(navigator.userAgent),result.isDoc&&($body=staticDocument.body||staticDocument.documentElement,arrayEach_1(["webkit","khtml","moz","ms","o"],function(core){result["-"+core]=!!$body[core+"MatchesSelector"]})),assign_1(result,{edge:isEdge,firefox:isBrowseType("Firefox"),msie:!isEdge&&result["-ms"],safari:!isChrome&&!isEdge&&isBrowseType("Safari"),isMobile:isMobile,isPC:!isMobile,isLocalStorage:isBrowseStorage(staticWindow.localStorage),isSessionStorage:isBrowseStorage(staticWindow.sessionStorage)})):result.isNode=!0,result},ajax:function(opt){void 0===window.XMLHttpRequest&&(window.XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e1){try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e2){throw new Error("不支持XMLHttpRequest")}}});var defaultOpt={url:"",type:"GET",data:null,contentType:"application/x-www-form-urlencoded",timeOut:5e3,files:[],progress:null,before:fn,success:fn,error:fn,complete:fn};if(Object.assign)opt=Object.assign({},defaultOpt,opt);else{for(var name in defaultOpt)defaultOpt[name]=opt[name]||defaultOpt[name];opt=defaultOpt}!function(opt){("GET"===opt.type?function(opt){var request=new window.XMLHttpRequest,timeoutFlag=!1,timer=setTimeout(function(){timeoutFlag=!0,request.abort()},opt.timeOut);request.open("GET",opt.url+"?"+encodeFormData(opt.data)),opt.before(),request.onreadystatechange=function(){var type;4===request.readyState&&(timeoutFlag||(clearTimeout(timer),200===request.status?-1!==(type=request.getResponseHeader("Content-Type")).indexOf("xml")&&request.responseXML?opt.success(request.responseXML):-1!==type.indexOf("application/json")?opt.success(JSON.parse(request.responseText)):opt.success(request.responseText):opt.error(request),opt.complete()))},request.send(null)}:function(opt){var request=new XMLHttpRequest,sendData=null,timeoutFlag=!1,timer=setTimeout(function(){timeoutFlag=!0,request.abort()},opt.timeOut);request.open("POST",opt.url),request.onreadystatechange=function(){var type;4===request.readyState&&(timeoutFlag||(clearTimeout(timer),200===request.status?-1!==(type=request.getResponseHeader("Content-Type")).indexOf("xml")&&request.responseXML?opt.success(request.responseXML):-1!==type.indexOf("application/json")?opt.success(JSON.parse(request.responseText)):opt.success(request.responseText):opt.error(request),opt.complete()))},opt.progress.enable&&request.upload&&(request.upload.onprogress=function(ev){ev.lengthComputable&&opt.progress.receiveHandle(ev)},request.upload.onload=function(ev){opt.progress.successHandle(ev)});if("application/x-www-form-urlencoded"===opt.contentType)request.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),sendData=encodeFormData(opt.data);else if("application/json"===opt.contentType)request.setRequestHeader("Content-Type","application/json; charset=utf-8"),sendData=JSON.stringify(opt.data);else if("multipart/form-data"===opt.contentType){var name,fd=new FormData;for(name in opt.data)opt.data.hasOwnProperty(name)&&"function"!=typeof opt.data[name]&&fd.append(name,opt.data[name]);for(var i=0;i<opt.files.length;i++)fd.append("file"+i,opt.files[i]);sendData=fd}request.send(sendData)})(opt)}(opt)}},document$1=window.document,preservedScriptAttributes={type:!0,src:!0,nonce:!0,noModule:!0};var dom={domEval:function(code,node,doc){var i,val,script=(doc=doc||document$1).createElement("script");if(script.text=code,node)for(i in preservedScriptAttributes)(val=node[i]||node.getAttribute&&node.getAttribute(i))&&script.setAttribute(i,val);doc.head.appendChild(script).parentNode.removeChild(script)},trigger:function(el,evt,detail){var e,opt={bubbles:!0,cancelable:!0,detail:detail=detail||{}};try{"undefined"!=typeof CustomEvent?e=new CustomEvent(evt,opt):(e=document.createEvent("CustomEvent")).initCustomEvent(evt,!0,!0,detail),el&&el.dispatchEvent(e)}catch(ex){console.warn("jinux-trigger is not supported by environment.")}},getStyle:function(computed,attr){return(computed=computed.currentStyle?computed.currentStyle:window.getComputedStyle(computed,!1)).getPropertyValue(attr)||computed[attr]},parseHtml:function(markup){if(0===markup.toLowerCase().trim().indexOf("<!doctype")){var doc=document.implementation.createHTMLDocument("");return doc.documentElement.innerHTML=markup,doc}if("content"in document.createElement("template"))return(el=document.createElement("template")).innerHTML=markup,el.content;var el,docfrag=document.createDocumentFragment();for((el=document.createElement("body")).innerHTML=markup,i=0;0<el.childNodes.length;)docfrag.appendChild(el.childNodes[i]);return docfrag},getTopLeftInBody:function(element){for(var actualTop=element.offsetTop,actualLeft=element.offsetLeft,current=element.offsetParent;null!==current;)actualTop+=current.offsetTop,actualLeft+=current.offsetLeft,current=current.offsetParent;return{top:actualTop,left:actualLeft}},hasClassName:function(element,argClassName){for(var arrClassName=element.className.split(" "),flag=!1,i=0;i<arrClassName.length;i++)if(arrClassName[i]===argClassName){flag=!0;break}return flag},addClassName:function(element,argClassName){element.className+=" "+argClassName},removeClassName:function(element,argClassName){for(var arrClassName=element.className.split(" "),arr=[],i=0;i<arrClassName.length;i++)arrClassName[i]!==argClassName&&arr.push(arrClassName[i]);return element.className=arr.join(" "),element.className},isParentNode:function(childNode,parentNode,flag){if(!(childNode instanceof window.Element&&parentNode instanceof window.Element))throw new Error("传入的参数不是dom对象");if(flag)return childNode.parentNode===parentNode;for(;null!=childNode&&null!=childNode&&"BODY"!=childNode.tagName.toUpperCase();){if(childNode===parentNode)return!0;childNode=childNode.parentNode}return!1}};var string={price2chinese:function(n){var fraction=["角","分"],digit=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],unit=[["元","万","亿"],["","拾","佰","仟"]],head=n<0?"欠":"";n=Math.abs(n);for(var s="",i=0;i<fraction.length;i++)s+=(digit[Math.floor(10*n*Math.pow(10,i))%10]+fraction[i]).replace(/零./,"");for(s=s||"整",n=Math.floor(n),i=0;i<unit[0].length&&0<n;i++){for(var p="",j=0;j<unit[1].length&&0<n;j++)p=digit[n%10]+unit[1][j]+p,n=Math.floor(n/10);s=p.replace(/(零.)*零$/,"").replace(/^$/,"零")+unit[0][i]+s}return head+s.replace(/(零.)*零元/,"元").replace(/(零.)+/g,"零").replace(/^整$/,"零元整")},stringLengthByType:function(str){for(var count=0,i=0,len=str.length;i<len;i++)/[\u4e00-\u9fa5]/.test(str[i])?count+=3:count++;return count}},date={date2string:function(result,hour,month){var minute=arguments,second=result||new Date,formatStr=hour,showTime=month;if(0===minute.length&&(formatStr="-"),1===minute.length)if("string"===toType_1(second))formatStr=second,second=new Date;else if("date"==toType_1(second))formatStr="-";else{if("boolean"!==toType_1(second))return"arguments error";second=new Date,formatStr="-",showTime=result}if(2===minute.length&&("date"!==toType_1(second)||"string"!==toType_1(formatStr)))if("date"===toType_1(second)&&"boolean"===toType_1(formatStr))formatStr="-",showTime=hour;else{if("string"!==toType_1(second)||"boolean"!==toType_1(formatStr))return"arguments error";second=new Date,formatStr=result,showTime=hour}if(3<=minute.length&&("date"!==toType_1(second)||"string"!=toType_1(formatStr)||"boolean"!=toType_1(showTime)))return"arguments error";var year=second.getFullYear(),month=9<second.getMonth()+1?second.getMonth()+1:"0"+(second.getMonth()+1),result=9<second.getDate()?second.getDate():"0"+second.getDate(),hour=9<second.getHours()?second.getHours():"0"+second.getHours(),minute=9<second.getMinutes()?second.getMinutes():"0"+second.getMinutes(),second=9<second.getSeconds()?second.getSeconds():"0"+second.getSeconds(),result=year+formatStr+month+formatStr+result;return showTime&&(result+=" "+hour+":"+minute+":"+second),result},getRangeDate:function(_d,dateStr){var splitStr=dateStr||"-";if("today"===_d){dateStr=new Date,dateStr=dateStr.getFullYear()+splitStr+(9<dateStr.getMonth()+1?dateStr.getMonth()+1:"0"+(dateStr.getMonth()+1))+splitStr+(9<dateStr.getDate()?dateStr.getDate():"0"+dateStr.getDate());return[dateStr,dateStr]}if("week"===_d){var _m3=new Date,_m=[],_arr=_m3.getFullYear(),_y2=9<_m3.getMonth()+1?_m3.getMonth()+1:"0"+(_m3.getMonth()+1),_d2=_m3.getDay(),_d=_m3.getDate();return _m3.setDate(_d-_d2),_m.push(_arr+splitStr+_y2+splitStr+_m3.getDate()),_m3.setDate(_m3.getDate()+6),_m.push(_arr+splitStr+_y2+splitStr+_m3.getDate()),_m}_d2=new Date,_arr=[],_y2=_d2.getFullYear(),_m3=9<_d2.getMonth()+1?_d2.getMonth()+1:"0"+(_d2.getMonth()+1);return _arr.push(_y2+splitStr+_m3+splitStr+"01"),_m=_d2.getMonth(),_d2.setDate(1),_d2.setMonth(_m+1),_d2.setDate(0),_d2=_d2.getDate(),_arr.push(_y2+splitStr+_m3+splitStr+_d2),_arr}};var random={randomNum:function(min,max,bInt){return bInt?Math.floor(Math.random()*(max-min+1))+min:Math.random()*(max-min)+min},randomColor:function(){return"#"+("00000"+(16777216*Math.random()<<0).toString(16)).slice(-6)}};_function={debounce:function(callback,wait,debounced){var args,context,opts=debounced||{},runFlag=!1,timeout=0,debounced="boolean"==typeof debounced,optLeading="leading"in opts?opts.leading:debounced,optTrailing="trailing"in opts?opts.trailing:!debounced,runFn=function(){runFlag=!0,timeout=0,callback.apply(context,args)},endFn=function(){!0===optLeading&&(timeout=0),runFlag||!0!==optTrailing||runFn()};return(debounced=function(){runFlag=!1,args=arguments,context=this,0===timeout?!0===optLeading&&runFn():clearTimeout(timeout),timeout=setTimeout(endFn,wait)}).cancel=function(){var rest=0!==timeout;return clearTimeout(timeout),timeout=0,rest},debounced},throttle:function(callback,wait,throttled){var args,context,runFlag=!1,timeout=0,optLeading=!("leading"in(throttled=throttled||{}))||throttled.leading,optTrailing="trailing"in throttled&&throttled.trailing,runFn=function(){runFlag=!0,callback.apply(context,args),timeout=setTimeout(endFn,wait)},endFn=function(){timeout=0,runFlag||!0!==optTrailing||runFn()};return(throttled=function(){args=arguments,context=this,runFlag=!1,0===timeout&&(!0===optLeading?runFn():!0===optTrailing&&(timeout=setTimeout(endFn,wait)))}).cancel=function(){var rest=0!==timeout;return clearTimeout(timeout),runFlag=!1,timeout=0,rest},throttled},curry:function curry(f,length){return length=length||f.length,function(){for(var _len=arguments.length,usedArgs=new Array(_len),_key=0;_key<_len;_key++)usedArgs[_key]=arguments[_key];return 0<length-usedArgs.length?curry(function(){for(var _len2=arguments.length,restArgs=new Array(_len2),_key2=0;_key2<_len2;_key2++)restArgs[_key2]=arguments[_key2];return f.call.apply(f,[null].concat(usedArgs,restArgs))},length-usedArgs.length):f.apply(null,usedArgs)}},compose:function(){for(var _len=arguments.length,functions=new Array(_len),_key=0;_key<_len;_key++)functions[_key]=arguments[_key];return function(flowIn){return functions.reduceRight(function(acc,f){return f(acc)},flowIn)}},interval:function(){function fn(callBack,timeout){callBack(),timer&&setTimeout(function(){fn(callBack,timeout)},timeout)}var timer=!0;return fn.stop=function(){timer=!1},fn}};return{arrayEqual:array.arrayEqual,arrayEach:array.arrayEach,arrFlat2complex:array.arrFlat2complex,array2tree:array.array2tree,tree2array:tree2array,isPlainObject:object.isPlainObject,assign:object.assign,deepClone:object.deepClone,isEmptyObject:object.isEmptyObject,setCookie:cookie.setCookie,getCookie:cookie.getCookie,removeCookie:cookie.removeCookie,urlQuery2Object:url.urlQuery2Object,object2UrlQuery:url.object2UrlQuery,toType:type.toType,browser:bom.browser,ajax:bom.ajax,domEval:dom.domEval,trigger:dom.trigger,getStyle:dom.getStyle,parseHtml:dom.parseHtml,hasClassName:dom.hasClassName,addClassName:dom.addClassName,removeClassName:dom.removeClassName,isParentNode:dom.isParentNode,price2chinese:string.price2chinese,stringLengthByType:string.stringLengthByType,date2string:date.date2string,getRangeDate:date.getRangeDate,randomNum:random.randomNum,randomColor:random.randomColor,debounce:_function.debounce,throttle:_function.throttle,curry:_function.curry,compose:_function.compose,interval:_function.interval,getTopLeftInBody:dom.getTopLeftInBody}});
